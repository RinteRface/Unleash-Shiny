!function(){"use strict";function createElement(type,config){const htmlElement=document.createElement(type);return void 0===config?htmlElement:(config.className&&(htmlElement.className=config.className),config.content&&(htmlElement.textContent=config.content),config.children&&config.children.forEach(el=>{null!==el&&htmlElement.appendChild(el)}),htmlElement)}function createExpandedElement(node){const iElem=createElement("span");node.expanded?iElem.className="jv__caret jv__caret-down":iElem.className="jv__caret jv__caret-right";const caretElem=createElement("div",{className:"jv__caret-icon",children:[iElem]}),handleClick=node.toggle.bind(node);caretElem.addEventListener("click",handleClick);const indexElem=createElement("div",{className:"jv__json-index",content:node.key}),typeElem=createElement("div",{className:"jv__json-type",content:node.type}),keyElem=createElement("div",{className:"jv__json-key",content:node.key}),sizeElem=createElement("div",{className:"jv__json-size"});let lineChildren;"array"===node.type?sizeElem.innerText="["+node.children.length+"]":"object"===node.type&&(sizeElem.innerText="{"+node.children.length+"}");const lineElem=createElement("div",{className:"jv__line",children:lineChildren=null===node.key?[caretElem,typeElem,sizeElem]:"array"===node.parent.type?[caretElem,indexElem,sizeElem]:[caretElem,keyElem,sizeElem]});return node.depth>0&&(lineElem.style="margin-left: "+24*node.depth+"px;"),lineElem}function createNotExpandedElement(node){const caretElem=createElement("div",{className:"jv__empty-icon"}),keyElem=createElement("div",{className:"jv__json-key",content:node.key}),separatorElement=createElement("div",{className:"jv__json-separator",content:":"}),valueElement=createElement("div",{className:"jv__json-value"+(" jv__json-"+typeof node.value),content:String(node.value)}),lineElem=createElement("div",{className:"jv__line",children:[caretElem,keyElem,separatorElement,valueElement]});return node.depth>0&&(lineElem.style="margin-left: "+24*node.depth+"px;"),lineElem}function createNode(){return{key:null,parent:null,value:null,expanded:!1,type:null,children:null,elem:null,depth:0,setCaretIconRight(){this.elem.querySelector(".jv__caret").classList.replace("jv__caret-down","jv__caret-right")},setCaretIconDown(){this.elem.querySelector(".jv__caret").classList.replace("jv__caret-right","jv__caret-down")},hideChildren(){null!==this.children&&this.children.forEach(item=>{item.elem.classList.add("jv__hide"),item.expanded&&item.hideChildren()})},showChildren(){null!==this.children&&this.children.forEach(item=>{item.elem.classList.remove("jv__hide"),item.expanded&&item.showChildren()})},toggle:function(){this.expanded?(this.expanded=!1,this.hideChildren(),this.setCaretIconRight()):(this.expanded=!0,this.showChildren(),this.setCaretIconDown())}}}function getType(val){let type=typeof val;return Array.isArray(val)?type="array":null===val&&(type="null"),type}function createTree(obj){const tree=createNode();return tree.type=getType(obj),tree.children=[],tree.expanded=!0,function traverseObject(obj,parent){for(let key in obj){const child=createNode();child.parent=parent,child.key=key,child.type=getType(obj[key]),child.depth=parent.depth+1,child.expanded=!1,"object"==typeof obj[key]?(child.children=[],parent.children.push(child),traverseObject(obj[key],child),child.elem=createExpandedElement(child)):(child.value=obj[key],child.elem=createNotExpandedElement(child),parent.children.push(child))}}(obj,tree),tree.elem=createExpandedElement(tree),tree}function render(tree,targetElem){let rootElem;rootElem=targetElem?document.querySelector(targetElem):document.body,function traverseTree(node,callback){callback(node),null!==node.children&&node.children.forEach(item=>{traverseTree(item,callback)})}(tree,node=>{node.expanded||node.hideChildren(),rootElem.appendChild(node.elem)})}window.jsonView={format:function(jsonData,targetElem){let parsedData=jsonData;("string"==typeof jsonData||jsonData instanceof String)&&(parsedData=JSON.parse(jsonData)),render(createTree(parsedData),targetElem)}}}();